package arbol;

public class demo {
    // generar un nuevo arreglo desordenado con elementos lineales
    private static int[] nuevoDesordenado(int n) {
        int[] res = new int[n];
        // rellenar de numeros
        for (int i = 0; i < n; i++) {
            res[i] = i;
        }
        // esparcir numeros
        for (int i = 0; i < n; i++) {
            // dos posiciones aleatorias
            int random = (int) (Math.random() * (n));
            int random2 = (int) (Math.random() * (n));

            // swap
            int aux = res[random];
            res[random] = res[random2];
            res[random2] = aux;
        }
        return res;
    }

    public static void main(String[] args) {
        // Hasta donde iterar
        int tamano_arreglo;
        if (args.length > 0) {
            tamano_arreglo = Integer.parseInt(args[0]);
        } else {
            tamano_arreglo = 200;
        }

        double t1, t2;
        int repeticiones = 20; // veces que se va a ordenar un arreglo

        System.out.println(
                " -------------------------------------------------------------------------------------------------------------------------------------");
        System.out.printf("| %-14s | %-59s | %47s\n |", "    N    ", "          Arbol balanceado",
                "Arbol desbalanceado    ");
        System.out.println(
                " --------------------------------------------------------------------------------------------------------------------------------------");
        System.out.printf("| %-12s | %-12s | %-12s | %-12s | %-12s | %-12s | %-12s | %-12s | %-12s |\n",
                "", "T(n) ms", "T/N", "T/(N*LogN)", "T/N^2", "T(n) ms", "T/N", "T/(N*LogN)", "T/(N^2)");

        // se realizaran 500 repeticiones de cada algoritmo
        for (int N = 0; N < repeticiones; N++) {
            double media1 = 0, media2 = 0;
            int[] aleatorio = nuevoDesordenado(tamano_arreglo);

            // arbol balanceado
            for (int i = 0; i < 100; i++) {
                AVLTree tree = new AVLTree();
                t1 = System.nanoTime();

                // nodos balanceados al insertar
                for (int k = 0; k < aleatorio.length; k++) {
                    tree.insert(aleatorio[k]);
                }
                // simulacion de impresion, realmente no hace nada
                tree.imprimir();

                t2 = System.nanoTime();
                media1 += t2 - t1;

            }

            // arbol desbalanceado
            for (int i = 0; i < 100; i++) {
                ArbolBinario tree = new ArbolBinario();
                t1 = System.nanoTime();

                // nodos balanceados al insertar
                for (int k = 0; k < aleatorio.length; k++) {
                    tree.add(new NodoNormal(aleatorio[k]));
                }
                // simulacion de impresion, realmente no hace nada
                tree.inorder();

                t2 = System.nanoTime();
                media2 += t2 - t1;
            }

            // transformar de nano segundo a milisegundo
            media1 = media1 / 1000;
            media2 = media2 / 1000;

            // imprimir resultados parciales
            System.out.println(
                    " --------------------------------------------------------------------------------------------------------------------------------------");
            System.out.printf("| %12d | %12f | %12f | %12f | %12f | %12f | %12f | %12f | %12f |\n",
                    N+1, media1, media1 / tamano_arreglo, media1 / (tamano_arreglo * (Math.log(tamano_arreglo) / Math.log(2))),
                    media1 / (tamano_arreglo ^ 2),
                    media2, media2 / tamano_arreglo, media2 / (tamano_arreglo * (Math.log(tamano_arreglo) / Math.log(2))), media2 / (tamano_arreglo ^ 2));
        }
        System.out.println(
                " --------------------------------------------------------------------------------------------------------------------------------------");
    }
}


 // -- CASO PROMEDIO --- 
    /* -------------------------------------------------------------------------------------------------------------------------------------
      |     N        |          Arbol balancedo                                  |                         Arbol desblanceado                |
       --------------------------------------------------------------------------------------------------------------------------------------
      |              | T(n) ms      | T/N          | T/(N*LogN)   | T/N^2        | T(n) ms      | T/N          | T/(N*LogN)   | T/(N^2)      |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            1 | 37799,061000 |   188,995305 |    24,725126 |   187,124064 | 17509,810000 |    87,549050 |    11,453519 |    86,682228 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            2 |  5966,059000 |    29,830295 |     3,902519 |    29,534946 |  3969,902000 |    19,849510 |     2,596793 |    19,652980 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            3 |  6364,494000 |    31,822470 |     4,163143 |    31,507396 |  2345,803000 |    11,729015 |     1,534437 |    11,612886 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            4 |  3297,187000 |    16,485935 |     2,156756 |    16,322708 |  3326,498000 |    16,632490 |     2,175929 |    16,467812 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            5 |  7141,928000 |    35,709640 |     4,671679 |    35,356079 |  4292,474000 |    21,462370 |     2,807794 |    21,249871 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            6 |  3546,020000 |    17,730100 |     2,319523 |    17,554554 |  3214,389000 |    16,071945 |     2,102596 |    15,912817 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            7 |  3492,765000 |    17,463825 |     2,284688 |    17,290916 |  1973,653000 |     9,868265 |     1,291006 |     9,770559 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            8 |  4593,964000 |    22,969820 |     3,005004 |    22,742396 |  3843,236000 |    19,216180 |     2,513938 |    19,025921 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            9 |  3492,579000 |    17,462895 |     2,284566 |    17,289995 |  1927,891000 |     9,639455 |     1,261072 |     9,544015 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           10 |  5221,559000 |    26,107795 |     3,415527 |    25,849302 |  4813,752000 |    24,068760 |     3,148772 |    23,830455 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           11 | 18977,733000 |    94,888665 |    12,413717 |    93,949173 |  2962,495000 |    14,812475 |     1,937828 |    14,665817 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           12 |  3191,086000 |    15,955430 |     2,087354 |    15,797455 |  1989,242000 |     9,946210 |     1,301203 |     9,847733 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           13 |  3186,968000 |    15,934840 |     2,084660 |    15,777069 |  2166,704000 |    10,833520 |     1,417285 |    10,726257 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           14 |  4912,401000 |    24,562005 |     3,213300 |    24,318817 |  2514,488000 |    12,572440 |     1,644777 |    12,447960 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           15 |  3283,977000 |    16,419885 |     2,148115 |    16,257312 |  1911,931000 |     9,559655 |     1,250633 |     9,465005 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           16 |  3449,687000 |    17,248435 |     2,256510 |    17,077658 |  2172,343000 |    10,861715 |     1,420973 |    10,754173 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           17 |  3504,499000 |    17,522495 |     2,292363 |    17,349005 |  5864,151000 |    29,320755 |     3,835859 |    29,030450 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           18 |  7655,389000 |    38,276945 |     5,007544 |    37,897965 |  1963,081000 |     9,815405 |     1,284091 |     9,718223 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           19 |  3387,076000 |    16,935380 |     2,215555 |    16,767703 |  2159,871000 |    10,799355 |     1,412815 |    10,692431 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           20 |  3832,522000 |    19,162610 |     2,506930 |    18,972881 |  2066,510000 |    10,332550 |     1,351746 |    10,230248 |
       --------------------------------------------------------------------------------------------------------------------------------------


 --- PEOR CASO ---
       --------------------------------------------------------------------------------------------------------------------------------------
      |     N          |           Arbol blncedo                                  |                         Arbol desblncedo                 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |              | T(n) ms      | T/N          | T/(N*LogN)   | T/N^2        | T(n) ms      | T/N          | T/(N*LogN)   | T/(N^2)      |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            1 | 10999,615000 |    54,998075 |     7,195069 |    54,453540 | 33776,496000 |   168,882480 |    22,093885 |   167,210376 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            2 |  2986,249000 |    14,931245 |     1,953366 |    14,783411 |  8522,297000 |    42,611485 |     5,574606 |    42,189589 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            3 |  3226,355000 |    16,131775 |     2,110424 |    15,972054 |  6678,914000 |    33,394570 |     4,368812 |    33,063931 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            4 |  2191,154000 |    10,955770 |     1,433278 |    10,847297 |  7429,462000 |    37,147310 |     4,859760 |    36,779515 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            5 |  2015,001000 |    10,075005 |     1,318053 |     9,975252 |  6430,681000 |    32,153405 |     4,206438 |    31,835054 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            6 |  1996,444000 |     9,982220 |     1,305914 |     9,883386 |  7510,289000 |    37,551445 |     4,912631 |    37,179649 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            7 |  2047,237000 |    10,236185 |     1,339139 |    10,134837 |  6824,264000 |    34,121320 |     4,463888 |    33,783485 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            8 |  1989,755000 |     9,948775 |     1,301539 |     9,850272 |  7320,192000 |    36,600960 |     4,788285 |    36,238574 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |            9 |  2071,333000 |    10,356665 |     1,354901 |    10,254124 |  6533,541000 |    32,667705 |     4,273721 |    32,344262 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           10 |  3244,230000 |    16,221150 |     2,122116 |    16,060545 |  6867,286000 |    34,336430 |     4,492030 |    33,996465 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           11 |  7148,589000 |    35,742945 |     4,676036 |    35,389054 |  7464,862000 |    37,324310 |     4,882916 |    36,954762 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           12 |  2209,100000 |    11,045500 |     1,445017 |    10,936139 |  6776,028000 |    33,880140 |     4,432336 |    33,544693 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           13 |  2198,502000 |    10,992510 |     1,438084 |    10,883673 |  6604,954000 |    33,024770 |     4,320433 |    32,697792 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           14 |  2036,488000 |    10,182440 |     1,332108 |    10,081624 |  6365,480000 |    31,827400 |     4,163788 |    31,512277 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           15 |  2047,058000 |    10,235290 |     1,339022 |    10,133950 |  6296,474000 |    31,482370 |     4,118650 |    31,170663 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           16 |  1895,874000 |     9,479370 |     1,240129 |     9,385515 |  6383,830000 |    31,919150 |     4,175792 |    31,603119 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           17 |  2016,124000 |    10,080620 |     1,318787 |     9,980812 |  6368,198000 |    31,840990 |     4,165566 |    31,525733 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           18 |  2015,073000 |    10,075365 |     1,318100 |     9,975609 |  6310,971000 |    31,554855 |     4,128133 |    31,242431 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           19 |  2040,013000 |    10,200065 |     1,334414 |    10,099074 |  6187,012000 |    30,935060 |     4,047049 |    30,628772 |
       --------------------------------------------------------------------------------------------------------------------------------------
      |           20 |  1976,975000 |     9,884875 |     1,293179 |     9,787005 |  6176,831000 |    30,884155 |     4,040389 |    30,578371 |
       --------------------------------------------------------------------------------------------------------------------------------------
*/
